{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Today's Tasks â€” SnoozeNot</title>
<style>
  body { background: #0b0b0b; color: #eaeaea; font-family: "Inter", sans-serif; margin:0; padding:25px; }
  .container { width: 100%; max-width:1100px; margin:0 auto; padding:0 30px; }
  h1 { color: #ff6600; font-size:2rem; font-weight:700; margin-bottom:25px; border-bottom:2px solid #1e1e1e; padding-bottom:10px; }

  table { width:100%; border-collapse:collapse; border-radius:8px; overflow:hidden; background:#0d0d0d; }
  th { background:#1b1b1b; padding:14px 12px; text-transform:uppercase; font-size:0.85rem; color:#bbb; text-align:left; }
  td { padding:14px 12px; border-bottom:1px solid #1b1b1b; }
  tr:hover { background:#121212; }

  input[type="checkbox"] { accent-color:#ff6600; width:18px; height:18px; }

  .status-inprogress { color:#ff6600; font-weight:700; }
  .status-completed { color:#aaa; font-weight:700; }

  .btn-back-dashboard { display:inline-block; margin-top:25px; padding:10px 16px; background:#ff6600; border:1px solid #ff6600; color:#000; border-radius:6px; font-weight:600; text-decoration:none; transition:0.2s; }
  .btn-back-dashboard:hover { background:#e65a00; border-color:#e65a00; }

  .empty { text-align:center; font-style:italic; padding:20px 0; color:#888; }
  
</style>
</head>


<body>
<div class="container">

<h1>Today's Tasks</h1>

<table>
<thead>
<tr>
    <th>Task</th>
    <th>Status</th>
</tr>
</thead>

<tbody>
{% for task in tasks %}
<tr>
    <td>{{ task.title }}</td>
    <td>
        {% if not task.completed %}
            <span class="status-inprogress">In progress</span>
        {% else %}
            <span class="status-completed">Completed</span>
        {% endif %}
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="2" class="empty">No tasks for today.</td>
</tr>
{% endfor %}
</tbody>
</table>

<a href="{% url 'UserAuth:Dashboard' %}" class="btn-back-dashboard">Dashboard</a>
</div>

<script>
function deleteTask(taskId) {
    if(!confirm("Delete this task?")) return;
    fetch("{% url 'UserAuth:delete_task' 0 %}".replace('0', taskId), {
        method:"POST",
        headers:{"X-CSRFToken":"{{ csrf_token }}","Content-Type":"application/json"},
        body: JSON.stringify({})
    }).then(res=>res.json()).then(data=>{if(data.ok) location.reload();});
}

function toggleTask(taskId) {
    fetch("{% url 'UserAuth:toggle_task' 0 %}".replace('0', taskId), {
        method:"POST",
        headers:{"X-CSRFToken":"{{ csrf_token }}","Content-Type":"application/json"},
        body: JSON.stringify({})
    }).then(res=>res.json()).then(data=>{if(data.ok) location.reload();});
}
</script>

</body>
</html>
